<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./favicon.ico" />
    <title>Text to File Converter</title>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: linear-gradient(to right, #a78bfa, #f472b6, #f87171);
      }

      .container {
        background: #fff;
        /* margin: 2rem !important; */
        display: flex;
        flex-direction: column;
        border-radius: 1rem;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        width: 90dvw;
        max-width: 500px;
      }

      @media (min-width: 640px) {
        .container {
          padding: 2rem;
        }
      }
      .form_container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 1rem;
        margin: 1rem;
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 1rem !important;
      }

      input,
      textarea {
        font-size: 20px !important;
        padding: 1rem;
        border: 2px solid #ddd;
        border-radius: 0.75rem;
        font-size: 1rem;
        resize: none;
        outline: none;
        transition: border 0.3s;
      }

      textarea {
        height: 30dvh;
        margin-top: 1rem;
      }

      input:focus,
      textarea:focus {
        border-color: #a78bfa;
      }

      button {
        /* margin-block: 1rem; */
        width: 100%;
        padding: 0.8rem;
        background: linear-gradient(to right, #8b5cf6, #ec4899);
        color: #fff;
        font-size: 1rem;
        font-weight: bold;
        border: none;
        border-radius: 0.75rem;
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        transition: opacity 0.3s;
      }

      button:hover {
        opacity: 0.9;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <h1>Text to File Converter</h1>
      <form class="form_container" onsubmit="formHandler(event)">
        <input
          id="fileName"
          type="text"
          placeholder="Your Name and Dept."
          required
        />
        <textarea
          id="userText"
          placeholder="Type your text here..."
          required
        ></textarea>
        <button type="submit" data-type="txt">Save as .txt</button>
        <button type="submit" data-type="pdf">Save as PDF (via Print)</button>
      </form>
    </div>

    <script>
      // Event Handler
      function formHandler(e) {
        e.preventDefault();
        const buttonType = e.submitter.dataset.type;
        if (buttonType === "txt") {
          downloadTxtFile();
        } else {
          downloadPDF();
        }
      }

      // Download as .txt file
      function downloadTxtFile() {
        const text = document.getElementById("userText").value;
        const fileName =
          document.getElementById("fileName").value || "myTextFile";
        const element = document.createElement("a");
        const file = new Blob([text], { type: "text/plain" });
        element.href = URL.createObjectURL(file);
        element.download = fileName + ".txt";
        document.body.appendChild(element);
        element.click();
      }

      // Download as PDF (via Print)
      function downloadPDF() {
        const text = document.getElementById("userText").value;
        const fileName =
          document.getElementById("fileName").value || "myTextFile";

        const win = window.open("", "_blank");
        win.document.write(`
    <html>
      <head>
        <title>${fileName}</title>
        <style>
          @page { margin: 0; }
           body { margin: 0; }
          pre {
             font-family: Arial, "Segoe UI", Helvetica, sans-serif;
            font-size: 24px;
            margin: 60px;
            white-space: pre-wrap;
            word-wrap: break-word;
          }
        </style>
      </head>
      <body>
        <pre>${text}</pre>
      </body>
    </html>
  `);
        win.document.close();
        win.print(); // opens system "Save as PDF" automatically
      }
    </script>
  </body>
</html>
